之前，介绍过虚拟DOM,其中大部分都是关于虚拟DOM拿到vnode所做的事，而模版编译所介绍的内容是如何让虚拟DOM拿到vnode.

### 什么是模板编译

vue是基于html的模板语法，在日常开发中，我们经常使用<template></template>标签中写入类似原生html的内容，这部分称之为模板。
而模板编译则是将<template></template>标签中类似html的内容编译，生成渲染函数，这一过程被称之为模板编译过程。

![vue渲染过程](./images/vue渲染过程.png)

### 将模版编译成渲染函数

将模版编译成渲染函数可以分两个步骤，先将模版解析成AST(抽象语法树)，然后再使用AST生成渲染函数。

但是因为静态节点不需要总是重新渲染，所以在生成AST之后，生成渲染函数之前，需要遍历一遍AST,给所有的静态节点做一个标记。这样在虚拟DOM中更新节点时，如果发现是节点有静态节点这个标记，则不去重新渲染它。

所以：编译模版可以分为三部分内容

* 将模版解析成AST
* 遍历AST标记静态节点
* 使用AST生成渲染函数

这三个部分内容在模版编译中分别抽象出三个模块来实现。分别是

* 解析器
* 优化器
* 代码生成器

![模板编译](./images/模板编译.png)
