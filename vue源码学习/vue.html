<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script src="./vue2.6.js"></script>
    <div id="app">
        <!-- 注释呢222 -->
        <p>
            <span>hello 
            <!-- 注释呢 -->
            </span>
            <span>vue</span>
          </p>
          <!-- 注释呢12313131 -->
    </div>
    <script>
        // vue是个自执行函数。

        // defineReactive$$1

        //initComputed  new watcher()  在实例化下。有computed属性的时候会执行

        // Vue.prototype.$watch  new watcher() // 有watch属性的时候

        // mountComponent  new watcher()
        
        var options = {
            data () {
                return {
                    id: 1,
                    heh: 2,
                    test: {
                        a: 1
                    }
                }
            }
        }
        var vue = new Vue({
            el: '#app',
            ...options
        })
        // vue.heh = 3
        // console.log(vue)
        // vue.$set(vue.test, 'a', 2)
        // 
    </script>

    <script>
        var arrayProto = Array.prototype
        // 创建一个对象作为拦截器
        var arrayMethods = Object.create(arrayProto)

        // 改变数组自身内容的7个方法
        var methodsToPatch = [
            'push',
            'pop',
            'shift',
            'unshift',
            'splice',
            'sort',
            'reverse'
        ]

        /**
         * Intercept mutating methods and emit events
         */
        methodsToPatch.forEach(function (method) {
            var original = arrayProto[method]      // 缓存原生方法
            Object.defineProperty(arrayMethods, method, {
                enumerable: false,
                configurable: true,
                writable: true,
                value:function mutator(...args){
                    console.log('进来了',...args, this)
                var result = original.apply(this, args)
                return result
                }
            })
        })
        arrayMethods.push(1,2,3)
        console.log(arrayMethods.push(1,2,3))
        var a = []
        a.__proto__ = arrayMethods
        a.push(1)


    </script>
</body>
</html>